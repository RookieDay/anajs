<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script>
		
//			var getTextNode = function ( dom, arr ) {
//				// 将 dom 里面的所有的文本节点放到 arr 中
//				var i, l = dom.childNodes.length,
//					node;
//				for ( i = 0; i < l; i++ ) {
//					node = dom.childNodes[ i ];
//					if ( node.nodeType === 3 ) {
//						arr.push( node.nodeValue );
//					} else {
//						getTextNode( node, arr );
//					}
//				}
//			};
			
		
			var getInnerText = function ( dom ) {
				if ( dom.innerText !== undefined ) {
					return dom.innerText;
				} else {
					// 怎么处理???
					// 1> 获得 innerHTML, 移除所有标签
					
					// 2> 递归获得所有文本节点
					var list = [];
					getTextNode( dom, list );
					return list.join( '' );
				}
				
				
				
				
				function getTextNode ( dom, arr ) {
					// 将 dom 里面的所有的文本节点放到 arr 中
					var i, l = dom.childNodes.length,
						node;
					for ( i = 0; i < l; i++ ) {
						node = dom.childNodes[ i ];
						if ( node.nodeType === 3 ) {
							arr.push( node.nodeValue );
						} else {
							getTextNode( node, arr );
						}
					}
				}
			};
		
			onload = function () {
				var dv = document.getElementById( 'dv' );
				
				// var res = dv.innerText;
				var res = getInnerText( dv );
				
				alert ( res );
			};
			
		</script>
	</head>
	<body>
		<div id="dv">
			<br />
			<p>1>2<3<span>4<5></5>6</span>783333<abc>3</abc>3333333339</p>
		</div>
	</body>
</html>
